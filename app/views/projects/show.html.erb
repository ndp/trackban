<script type="text/javascript">
  var h2ht = 30;
  Csster.style({
    html: {
      'font-family': 'verdana',
      'overflow': 'scroll',
      'height': '100%'
    },
    body: {
      margin: '0',
      padding: '0',
      'height': '100%'
    },
    'h2': {
      margin: '0',
      'font-size': 'x-small',
      'background-color': 'black',
      color: 'white',
      width: '100%',
      padding: '0 20px',
      height: h2ht,
      lineHeight: h2ht,
      opacity: .6

    },
    'body.past-pinned section#past,body.present-pinned section#present,body.future-pinned section#future,body.undefined-pinned section#undefined': { borderTopWidth: h2ht, borderColor: '#999'},
    section: {
      margin: '0',
      'background-color': '#eee',
      padding: 0,
      include: clearfix()

    },
    article: {
      display: 'table-cell',
      padding: '0 1%',
      'min-width': 200,
      'max-width': 400,
      borderLeft: '1px solid #999',
      borderRight: '1px solid #999',
      paddingTop: 0,
      '&:first-child': {
        marginLeft: 0
      },
      '&:last-child': {
        width: '*',
        'max-width': 4000,
        marginRight: 0
      }
    },
    'article h3': {
      'font-size': 'x-small',
      padding: 3, margin: 0,
      backgroundColor: '#333',
      color: '#999'
    },
    'article h4, article p': {
      'font-size': 'x-small',
      padding: '2px 10px'
    },
    '#past': {
      'background-color': 'black',
      article: {
        'background-color': '#111',
        'color': '#999',
      }
    },
    '#present': {
      'background-color': 'lightgreen',

    },
    '#future': {
      'background-color': 'lightviolet',

    },
    '#undefined': {
      'background-color': 'lightgray',

    }
  });


</script>
<!--
Object {groupBy: "epoch", values: Array[4]}
groupBy: "epoch"
values: Array[4]
0: Object
group: "past"
groupBy: "milestone_id"
values: Array[16]
0: Object
group: "pivotal-tracker-story-108128"
groupBy: "theme"
values: Array[7]
0: Object
group: "misc"
values: Array[4]
0: h
$$hashKey: "00V"
_id: "pivotal-tracker-story-106584"
actions: Array[1]
created_at: "2006-11-21T00:53:38Z"
current_estimate: 1
current_state: "accepted"
current_worker: null
epoch: "past"
milestone_id: "pivotal-tracker-story-108128"
position: 0
project_id: "pivotal-tracker-83"
story_id: null
summary: "Set up acceptance server"
tags: Array[2]
theme: "misc"
updated_at: "2013-06-21T04:11:48Z"
__proto__: h
1: h
2: h
3: h
length: 4
-->

<div ng-app="Trackban" ng-controller="TrackbanCtrl">

  <section id='e.group' ng-repeat='e in hier.values'>
    <h2 id="{{e.group}}-hd">{{e.group}}</h2>
    <section id='m.group' ng-repeat='m in e.values'>
      <h3 id="{{m.group}}-hd">{{milestoneName(m.group)}}</h3>
      <article id='th.group' ng-repeat='th in m.values'>
        <h3 id="{{th.group}}-hd">{{th.group}}</h3>
        <div ng-repeat="story in th.values">
          <story/>
        </div>
      </article>
    </section>
  </section>

</div>




<script type="text/javascript">
  setTimeout(function () {
  //    $('#past-hd').fixie({pinnedBodyClass: 'past-pinned', topMargin: 0});
  //    $('#present-hd').fixie({
  //      topMargin: h2ht,
  //      bottomMargin: h2ht * 2,
  //      pinSlop: 5,
  //      pinnedBodyClass: 'present-pinned'
  //    });
  //    $('#past-hd').fixie({
  //      topMargin: h2ht * 2,
  //      bottomMargin: h2ht * 1,
  //      pinSlop: -10,
  //      pinnedBodyClass: 'future-pinned'});
  //    $('#undefined-hd').fixie({
  //      topMargin: h2ht * 3,
  //      bottomMargin: 0,
  //      pinSlop: -20,
  //      pinnedBodyClass: 'undefined-pinned'
  //    });
  //  }, 3000);
</script>
