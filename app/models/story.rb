class Story
  include Mongoid::Document
  include Mongoid::Timestamps
  field :summary, type: String
  field :current_state, type: String
  field :current_estimate, type: Integer
  field :current_worker, type: Moped::BSON::ObjectId
  field :tags, type: Array
  field :theme, type: String
  has_many :stories
  belongs_to :project
  belongs_to :story
  belongs_to :milestone
  embeds_many :actions

  def self.seed
    stories = [
        {story_type: "feature", current_state: "accepted", name: "Prototype map view", description: "As a Tracker user I want to see a preview of how my stories will be organized by Story Mapper.\n\n    Alon to provide CSV exports.\n\n    Excel-based map view of a few iterations or milestones for 2 Tracker projects\n  ", id: "919999685625", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Set up staging server", description: "", id: "952056728255", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "View Tracker Updates", description: "as a user, updates to tracker should be reflected in the story mapper", id: "976752729459", labels: "configure"},
        {story_type: "feature", current_state: "accepted", name: "Produce output from \"Cards\" examples", description: "\n\n    http://github.com/jeremylightsmith/cards/tree/master is an implementation of creating a \"card wall\" from a\n    story backlog. It would be great to see the approach used here to inform our own process.\n\n    This story is to run the examples included in the project and share the results with the team.\n  ", id: "920302", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Refine Prototype", description: "Address top N problems, time boxed\n\n    Do this based on Peer Pressure.\n\n\n  ", id: "938778711271711917728249", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "create milestone summary view", description: "This view is a 90 degree rotation of what we have already, and the stories for one tag in a given\n    milestone will be collapsed.\n  ", id: "952510728251728369", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Group by label", description: "Within a milestone, group stories by label so that I can see how the backlog will incrementally meet user\n    needs by activity.\n\n    Label = activity\n    Priority goes by column top to bottom, then left to right\n    Have an \"Other\" activity for unlabeled stories\n  ", id: "920091", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Group by milestone", description: "Group stories into columns by milestone so that I can see how my project will be phased.\n\n  ", id: "920017", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Features in priority order", description: "As a Tracker user I can see all features and releases for my project in priority order so that I can see\n    the entire scope of my project.\n\n    Features and releases only, distinguish visually\n    List priority top to bottom\n    Show story name, status, label/s\n    Use Tracker API output (can be stored locally)\n  ", id: "920105", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Choose a project", description: "As a Tracker user I can select a project so that I can see its story map view.\n\n    Select from a couple preset available projects.\n  ", id: "920010729491", labels: "setup"},
        {story_type: "feature", current_state: "accepted", name: "size stories in UI based on number of points", description: "", id: "952518729497", labels: "visualize"},
        {story_type: "chore", current_state: "accepted", name: "Continuous Integration", description: "", id: "1020824", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Hide Bugs and Chores", description: "", id: "13788161038071", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Estimation Bucket view", description: "As a user of the system, I can see a view that shows completed stories, grouped by estimate, so that I\n    can estimate new stories.\n  ", id: "13744281037963", labels: "labs"},
        {story_type: "release", current_state: "accepted", name: "Milestone: User Feedback", description: "", id: "938786", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Select Project", description: "As a Tracker user I can provide my project info so that I can load a story map view.\n\n    If no saved API key for user, enter API key\n    With API key, fetch list of projects\n    Selecting project loads story map\n    Save API key for next time\n  ", id: "920007", labels: "setup"},
        {story_type: "bug", current_state: "accepted", name: "Error on home page", description: "When I go to http://story-mapper.carbonfive.com I get a 500 error page.", id: "1420731", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Activities from Labels", description: "As a user, I can specify which labels are \"activities\", and should show up in my story map.\n\n    After choosing project\n    List of labels with checkboxes starting all checked\n  ", id: "9386931038065103807710833691083641108394310849251085507", labels: "setup"},
        {story_type: "bug", current_state: "accepted", name: "Background image should tile throughout entire region", description: "", id: "1401828", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Remember tracker project", description: "As a user, I can return to my last project.\n\n    If no saved API token redirect to Select Project.\n  ", id: "938184", labels: "planning"},
        {story_type: "feature", current_state: "accepted", name: "Configure activities on first project view", description: "As a project planner I am asked to define my activities before viewing a project for the first time so\n    that my first view of the story map makes as much sense as possible.\n\n    Show the activities configuration screen.\n  ", id: "1445793", labels: "configure"},
        {story_type: "bug", current_state: "accepted", name: "Login busted", description: "See Carbonfive skype chat:\n\n    On login (http://story-mapper.carbonfive.com/projects/accounts/login), i get this error \"The page you were\n    looking for doesn't exist.\"\n  ", id: "1421423106729910799891126633", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Reduce visual weight of activity bar", description: "This is a quick fix to an issue that we want to spend more time finding a solution to - resolving the\n    relative weight of milestone, activity, story and status.\n\n    Change the activity background to a light grey or something visually equivalent.\n\n    Retain the milestone blue border around the entire bucket of activities and stories.\n  ", id: "14019571126771", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Labels should be activities by default", description: "When I create a new label in Tracker, it should show up as an activity in Mapper so that I don't forget\n    about it in Mapper.\n\n    See http://www.pivotaltracker.com/story/show/938693 for the back story.\n  ", id: "144577911000671100121", labels: "planning"},
        {story_type: "bug", current_state: "accepted", name: "Deleted labels still exist", description: "When a label is deleted from pivotal tracker it is not deleted in project mapper.\n\n    To reproduce:\n    1) In pivotal tracker create a new label.\n    2) View the project configuration page in story mapper and confirm that the label is showing up.\n    3) In pivotal tracker delete the label you just created\n    4) Return to the project configuration page in story mapper\n\n    EXPECTED BEHAVIOR: The label that has been deleted from pivotal tracker should no longer exist in story mapper.\n\n    ACTUAL BEHAVIOR: The label still exists.\n\n    Possible implementation: To avoid the overhead of checking for deleted labels on each request maybe we should have a\n    'clean up labels' command available in the project config view.\n  ", id: "14522961100161", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "production deployment is busted", description: "", id: "1453398112742511291951129383", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Crash if project has no labels", description: "Craete a project with no labels.\n    Try to hit its URL. like this:\n\n    http://story-mapper.carbonfive.com/projects/1742/milestone_summary\n\n    Crashes.\n\n    Looks like a divide by 0 error:\n\n    ActionView::TemplateError (Failed with 404 Not Found) on line #13 of app/views/projects/milestone_summary.rb:\n    10: css '/stylesheets/map.css'\n    11: css 'milestone_summary.css'\n    12:\n    13: style \"tbody tr td { width: #\{100 / a@window.labels.length}%}\"\n    14: end\n    15:\n    16: private\n\n    app/models/project.rb:29:in `story_list'\n    (__DELEGATION__):2:in `releases'\n    app/models/window.rb:16:in `releases'\n    app/models/window.rb:12:in `features'\n    (__DELEGATION__):2:in `labels'\n    app/views/projects/milestone_summary.rb:13:in `head'\n    app/views/layout.rb:13:in `content'\n    erector (0.6.7) [v] lib/erector/widget.rb:610:in `instance_eval'\n    erector (0.6.7) [v] lib/erector/widget.rb:610:in `__element__'\n    erector (0.6.7) [v] lib/erector/widget.rb:495:in `html'\n    app/views/layout.rb:12:in `content'\n    erector (0.6.7) [v] lib/erector/widget.rb:286:in `send'\n    erector (0.6.7) [v] lib/erector/widget.rb:286:in `_render'\n    erector (0.6.7) [v] lib/erector/widget.rb:190:in `context'\n    erector (0.6.7) [v] lib/erector/widget.rb:285:in `_render'\n    erector (0.6.7) [v] lib/erector/widget.rb:265:in `to_s'\n  ", id: "14080781156743", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "releases in the wrong order", description: "releases are appearing in an apparently arbitrary order in the milestone summary view.", id: "148841311283031151901", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Use form helpers for authentication", description: "so that we don't have to bypass the protect from forgery functionality", id: "1470974", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Rename projects/list to index", description: "the route /projects should do what projects/list currently does. The login functionality should be moved\n    to the session controller\n  ", id: "1470959", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Login as Resources", description: "use rails conventions for creating end destroying sessions, aka logging in and out.\n\n    session/create\n    session/delete\n  ", id: "1470939", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Remove Account model", description: "we're only using it to display email address, which can be stored in the session. There's no reason to\n    keep it around.\n  ", id: "1537918", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "upgrade passenger on deployment box", description: "", id: "1470979", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Order activities", description: "Asa user, I can re-arrange activities to represent how the order user does things.", id: "9387011126759113030711304311151897147472", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Show ajax activity indicator on stories", description: "As a project planner I can see an indicator when a story is being updated so that I know something is\n    happening.\n\n    Use a spinner, a la tracker.\n  ", id: "1538105", labels: "manage"},
        {story_type: "feature", current_state: "accepted", name: "Drop stories in priority order", description: "As a project planner when I drag a story from one activity column to another I can drag a story from one\n    activity column to another to see what position it will end up in.\n\n    The position will be indicated by a black line, a la tracker\n  ", id: "1538095", labels: "manage"},
        {story_type: "feature", current_state: "accepted", name: "URL available outside of C5", description: "", id: "1533586", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Publish Project to iCal", description: "As a user, I can grab a URL that I can incorporate in my googel calendar.\n\n    This URL is publically available (when story mapper is) and there is ONE per PROJECT. Therefore, users share these.\n    One user can publish and another can undo it. This is kinda in sync with Tracker's lack of roles-- but we'll have to\n    see if it works.\n\n    Unpublishing and republishing generates a NEW url, and the old one ceases to work.\n  ", id: "1498681", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "We should get notifications if we check in broken code", description: "We should have some sort of build server which will email us if we check in code which breaks our tests\n  ", id: "1409712", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Rename ProjectRecord to ProjectConfig", description: "", id: "1583932", labels: ""},
        {story_type: "release", current_state: "accepted", name: "Milestone: View Project Map", description: "This milestone is the first crack at showing an existing Tracker project in a map view using a one-to-one\n    mapping of priority and labels from Tracker to create the map.\n  ", id: "920138", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Deploy to acceptance and production", description: "As a product owner I can ask the team to deploy the app to production based on what I have accepted in\n    acceptance.\n\n    story-mapper.carbonfive.com should be production\n    story-mapper-acceptance.carbonfive.com should be acceptance\n\n    Use capistrano multistage deployments\n    All on VMWare infrastructure for now (we can move production later)\n  ", id: "15521701202865", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Page TItles", description: "As a user of the Story Mapper, it would be nice if pages had titles so that I could identify the tab in\n    my browser.\n\n    One of those little icons would be cool too.\n  ", id: "1408263115883111625251162531116324711694811169483", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "Checkboxes get out of sync", description: "0. Firefox\n    1. Bring up milestone summary view\n    2. Click on chores checkbox (notice that the chores appear)\n    3. Refresh page\n    4. Notice that the checkbox is still checked, but chores do NOT appear.\n\n    Expected behavior: checkbox persisted, view reflects state of checkbox.\n\n    Same bug with proportional sizes and bugs.\n  ", id: "15475261172013", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Always show all activities", description: "Currently, if the stories shown in the story map do not include a certain label that is an activity, the\n    activity does not show up in the map. The activity should always be there regardless.\n  ", id: "1553265", labels: "setup"},
        {story_type: "feature", current_state: "accepted", name: "Story Map is what it is called", description: "Rename milestone_summary to story_map\n    Rename Milestone Summary to Story Map\n\n    From Activities, link should be \"Go to Story Map\"\n\n    Have the header of the page match the title as specified in an earlier story. For example,\n\n    C5 Timesheet Story Map\n    C5 Timesheet Configuration\n  ", id: "1547531", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "add icons for bugs and chores", description: "when bugs and/or chores are shown, there is no way to tell from the ui which is which. we should add\n    icons (could copy them from tracker). also, maybe we could only show any of the icons if chores or bugs are visible,\n    to save space when they aren't\n  ", id: "1554275", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "Stories \"update\" when dragged even if nothing changes", description: "Dragging a story into its current column does shows the updating spinner and flash even though the\n    story's tags have not been changed.\n  ", id: "1554061120329112044191204879158964", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Story map starts with current release", description: "As a planner I see all stories for the current iteration and the future when I load the story map.\n\n    - All stories after the last completed release through the end of the backlog\n    - Avoid loading earlier stories in order to have the story map load faster\n    - Requires investigation into how to do this efficiently and I expect to discuss the implementation based on what we\n    learn\n  ", id: "1553242120452112046931205419", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Move story to activity", description: "As a planner I can move a story to a new activity to recategorize it or give it a categorization if it\n    does not belong to an activity.\n\n    Drag-n-drop\n    Applies the activity label in Tracker\n\n\n    This is written as just being about assigning to an activity. It does not have to include changing\n    priority/milestone. There is another story for that.\n  ", id: "13820381151889115647511693951169407118840112034851205967", labels: "manage"},
        {story_type: "feature", current_state: "accepted", name: "Show status of stories", description: "As a user of an existing project, I can see the status of stories. It's too hard to tell from the\n    different colors, and they don't have the START/FINISH/DELIVER visual queues. Maybe steal the colors, but not as\n    buttons.\n  ", id: "14019691158837116256511694571169461117200711783531203241", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Story map should include all backlog stories", description: "Presently, backlog stories after the last milestone do not show up in the story map. They should.\n\n    For now, I'd be okay with an empty milestone bar (no flag or label) below these stories if that is straight forward.\n    If not, grab me to discuss presentation alternatives.\n  ", id: "1553299", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Show all releases", description: "As a planner, I see the release range I am viewing at the top of the story map and can click to see all\n    releases.\n\n    e.g. \"Showing 3-6 of 6 releases. (Show all)\"\n\n    Continue to use the existing paging implementation to handle \"Show all\"", id: "15533221221255", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "\"Logged in as\"", description: "I just logged in to acceptance and see \"Logged in as\" in the upper right with no username.\n  ", id: "1642468", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Story link in detail popup", description: "Remove link from story \"card\" so that it is more easily dragged.\n    Add the full story link to the bottom of the story popup.\n    Keep the popup shown when you mouse over it from the note balloon so that you can click the link.\n  ", id: "18401921382219", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "Broken point icon in Safari", description: "Unestimated stories in Safari (see TNC Bedsider) show a broken icon for pt value.", id: "1840491", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "First project view should configure labels first", description: "This feature is no longer working, it appears.\n\n    Opening a project story map for the first time takes me to the story map, not to configure activities from labels.\n  ", id: "1840282", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Pull out experimental features", description: "Move estimation buckets and ical link to a new url/page.\n\n    For now, keep the same layout for the story map list and the experimental project list. We'll apply design later.\n\n    Put the \"Experimental\" link next to the \"Projects\" link in the header.\n  ", id: "1840535", labels: "planning"},
        {story_type: "feature", current_state: "accepted", name: "Extract global navigation", description: "This is a logical story, less a design story. The will be visual design for this later.\n\n    Pull out a shared header with Logged in as alon@carbonfive.com | Projects | Experimental | Logout in the top right\n    and share across all story mapper pages. This is in line with the Review 2 direction on the wiki.\n\n    Don't show Projects in the header links for a story map (w/ configure,...)\n  ", id: "1853827", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Simplify default header", description: "Remove the C5 branding from the login page and project list in favor of the styling used on the story\n    map.\n  ", id: "1840636", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "View story details (\"card\")", description: "I'd like to be able to see the story card including description and requester from the story-map view.\n    I'm envisioning the card as a temporary pop-up that shows either on a delayed hoover (like Tracker).\n\n    *bold*\n\n    _italic_\n\n    &lt;p&gt;", id: "1583155120454512729591279621137690513814711381935", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Saturate story colors", description: "See http://wiki/display/C5/Visual+Design+Review+2.", id: "1840182", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Show detail icon on story hover", description: "Don't show the story detail icon until the user mouses over the story card.", id: "1840263", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Move story status to detail popup", description: "Show below \"Requested by\" in the same style as it is in the story map.", id: "1840196", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "Estimation buckets broken", description: "only some stories show up here, not all completed stories.", id: "1682812", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Build should break if there are failing js tests", description: "Right now, the build only breaks if there are failing ruby tests.", id: "1543621", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Humanize activities in header", description: "When selecting which labels are activities, show the labels unmodified. In the story map, humanize the\n    labels to make them activities.\n  ", id: "1867546", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Show chore/bug icon in lower right", description: "Per design from Suzannah.", id: "18675291437787", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Map milestone design", description: "Implement the design from Suzannah for the map milestone.\n\n    Includes activities header with mouseover behavior.\n  ", id: "1867527142287314228911428689142965314376811445719", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "Release borders in Safari", description: "In safari the releases do not take up 100% of the screen width as expected. The table cells collapse to\n    the min-width always.\n  ", id: "1933716", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Unestimated story title is italic", description: "This is to be consistent with Tracker and to indicate a difference between an unestimated story and zero\n    point story.\n  ", id: "1867537", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Map header design integration", description: "This story is to implement the header design from Suzannah.", id: "186751314377611440195", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "Mixed user cookies", description: "James logged in and viewed the sandbox project.\n    He then logged out.\n    Alon logged in and was directed to the sandbox project.\n\n    It appears that the feature that takes me to my last viewed project is sharing the cookie value for different users.\n    It should not.\n  ", id: "18402711428665", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Estimates in non-fibonacci have bad images", description: "Pick a project with a non-fibonacci pt estimation values. View it. notice broken images on some of the\n    stories (the 4 pt ones, actually).\n\n    This is because we are hard-coding the fibonacci icons into the image.\n  ", id: "18575341405189", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Can't drag to Other Activities", description: "In FF, TNC Bedsider, I can't drag many stories to Other Activities. The drag indicator stops and the\n    previous activity.\n  ", id: "18628221468429", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Google analytics", description: "As an administrator I can view reports on the usage of Story Mapper.\n\n    Use C5 Google Analytics account.\n\n    http://wiki.carbonfive.com/display/C5/Google+Analytics\n  ", id: "18659131423673", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Bug and chore display bounce", description: "If I show bugs or chores, the new stories expand beyond their final size and then jump back to being the\n    correct size. They should just expand to their final size without the jump.\n  ", id: "1923250", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Email production errors to developers", description: "We do this for Bedsider and it is pretty great to know when errors are happening.\n\n    Check with the Bedsider team on how to do this.\n  ", id: "1867563148401514841071485407", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "500 error on project with no stories", description: "If a project has no stories attempting to view the story map results in a 500 error.", id: "1851428", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "You Don't Have Any Labels For Your Project!", description: "As a planner, if my project has no labels, I should get a helpful message when I try to view a story map\n    that I need to label my stories with activity labels in Tracker.\n\n    I just tried to view a project (Time Off) with no labels, got the Settings screen, continued to view the story map\n    and got a 500 error.\n\n    Let's have the settings screen say:\n\n    \"You don't have any labels for your project. Add activity labels to stories in Tracker before viewing the story\n    map.\"\n\n    Open &lt;Project Name&gt; in Tracker (link to open project in Tracker in new window)\n  ", id: "93871114482011468567", labels: "setup"},
        {story_type: "feature", current_state: "accepted", name: "HTTPS Login", description: "Regardless of HTTPS project setting, log user in over HTTPS to protect username and password.\n\n    All other communication should be HTTP unless HTTPS is required by Tracker project settings.\n  ", id: "19468651484387", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "500 error logging in with no password", description: "If I try to log in with username alon@carbonfive.com and no password entered, I get the 500 error page.\n  ", id: "2083144158769315877031590003", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "5 whys basic", description: "Shows recent bugs in simple view so that you can review them and look for root causes.", id: "187925314401891440197", labels: "labs"},
        {story_type: "bug", current_state: "accepted", name: "iCal broken", description: "doesn't use generated key, and then doesn't set api key.\n\n    To test, generate iCal URL, and then try to look at it in a differnet browser or in Apple's iCal\n  ", id: "18792631520665", labels: "labs"},
        {story_type: "feature", current_state: "accepted", name: "get official SSL cert", description: "replace self signed cert with something from a real CA.", id: "208444715694711569793", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Deploy to EY Cloud", description: "Set up both acceptance and production environments on EY Cloud.\n\n    Acceptance as single instance app and db.\n    Production as a small cluster - 2 app, 1 db.\n  ", id: "2024156", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "async loading of labels on settings page", description: "As a user I should see a message when I go to the setting page letting me know that the labels are being\n    loaded from pivotal.\n  ", id: "1970418", labels: "configure"},
        {story_type: "feature", current_state: "accepted", name: "Restructure experimental features and provide help text", description: "I added descriptions of each of the labs projects, so at least they have a little context to\n    understand.\n  ", id: "1970327", labels: "labs"},
        {story_type: "feature", current_state: "accepted", name: "Respect \"Require HTTPS\" setting", description: "As a user of the story map, if my admin has set up \"require https\", then my story map is served\n    over https.\n\n    I am not allowed to create a public ical for these projects (and receive the appropriate error message).\n\n    There is a cheaper version of this story where we simply refuse to handle projects that require HTTPS.\n  ", id: "1873911", labels: "configure"},
        {story_type: "chore", current_state: "accepted", name: "clean up story_more_info", description: "we have 2 pages that are identical. Lets choose one and clean up the other.", id: "2157420", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "remove composite_primary_keys gem from project?", description: "is this gem used anywhere? I cannot find any usages.", id: "21274251607795", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "MethodNotAllowed error for labels request", description: "We are seeing errors emailed from production that appear to be caused by Firefox 3.5's new support for\n    cross site scripting via AJAX. See http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/ for details\n    on the support.\n\n    Basically, on only Andy's install of FF 3.5.7, the labels fail to load because of the error below. I have not been\n    able to reproduce this on FF 3.5.6 nor Jeremy with FF 3.5.7. For some reason Andy's FF seems to be checking for\n    cross site scripting support with an OPTIONS request.\n\n    A ActionController::MethodNotAllowed occurred in application#index:\n\n    Only get requests are allowed.\n    /usr/lib/ruby/gems/1.8/gems/actionpack-2.3.4/lib/action_controller/routing/recognition_optimisation.rb:64:in\n    `recognize_path'\n\n    -------------------------------\n    Request:\n    -------------------------------\n\n    * URL : http://www.trackerstorymaps.com/projects/19152/labels\n    * IP address: 70.36.236.224\n    * Parameters: {}\n    * Rails root: /data/c5storymapper/releases/20100105174706\n\n    -------------------------------\n    Session:\n    -------------------------------\n\n    * session id: nil\n    * data: nil\n\n    -------------------------------\n    Environment:\n    -------------------------------\n\n    * CONTENT_LENGTH : 0\n    * DOCUMENT_ROOT : /data/c5storymapper/current/public\n    * HTTP_ACCEPT : text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n    * HTTP_ACCEPT_CHARSET : ISO-8859-1,utf-8;q=0.7,*;q=0.7\n    * HTTP_ACCEPT_ENCODING : gzip,deflate\n    * HTTP_ACCEPT_LANGUAGE : en-us,en;q=0.5\n    * HTTP_ACCESS_CONTROL_REQUEST_HEADERS : x-requested-with\n    * HTTP_ACCESS_CONTROL_REQUEST_METHOD : GET\n    * HTTP_CONNECTION : close\n    * HTTP_HOST : www.trackerstorymaps.com\n    * HTTP_KEEP_ALIVE : 300\n    * HTTP_ORIGIN : https://www.trackerstorymaps.com\n    * HTTP_USER_AGENT : Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9.1.7) Gecko/20091221 Firefox/3.5.7\n    * HTTP_X_FORWARDED_FOR : 70.36.236.224\n    * PASSENGER_APP_SPAWNER_IDLE_TIME : -1\n    * PASSENGER_APP_TYPE : rails\n    * PASSENGER_ENVIRONMENT : production\n    * PASSENGER_FRAMEWORK_SPAWNER_IDLE_TIME : -1\n    * PASSENGER_SPAWN_METHOD : smart-lv2\n    * PASSENGER_USE_GLOBAL_QUEUE : false\n    * PATH_INFO : /projects/19152/labels\n    * QUERY_STRING :\n    * REMOTE_ADDR : 10.251.43.112\n    * REMOTE_PORT : 44400\n    * REQUEST_METHOD : OPTIONS\n    * REQUEST_URI : /projects/19152/labels\n    * SCGI : 1\n    * SCRIPT_NAME :\n    * SERVER_ADDR : 10.251.26.164\n    * SERVER_NAME : trackerstorymaps.com\n    * SERVER_PORT : 81\n    * SERVER_PROTOCOL : HTTP/1.1\n    * SERVER_SOFTWARE : nginx/0.6.35\n  ", id: "214156415971351597211", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Respect useSSL project setting in development", description: "In development, projects with Tracker setting to use SSL are failing to load with a 400 status error from\n    Tracker b/c in development project data is not loaded via SSL.\n\n    This is due to the nature of how SSL support is implemented in Story Mapper. Story Mapper should not fail in this\n    way in development.\n  ", id: "2141236", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Map footer design integration", description: "https://wiki.carbonfive.com/display/C5/Visual+Design+Review+5\n\n    Lightweight footer.\n  ", id: "2256036", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Introduction content", description: "Alon to write intro content so that Suzanna can design the home page and work the style/design through\n    the rest of the site.\n  ", id: "2128020", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "FAQ", description: "As a planner, I can read an answer to my common question so that I can clear up my confusion.\n\n    - This is a place to keep track of behavioral or implementation idiosyncrasies\n    - I see this as a starting point, not something that needs to be finely crafted or designed\n  ", id: "1553340117200914560431474799", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "handle headers for pages that show up logged-in and logged-out", description: "The FAQ page right now always shows a logged out header, even when the user is logged in. We should fix\n    this and also fix the templates to handle pages that show up both logged in and out.\n  ", id: "215760116301591671651", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Project list is home page", description: "Make the project list the home page with the home page content in the left column and the project list in\n    the right column when you are logged in. When not logged in, show the login form in the right column.\n\n    /login (or /sessions/new) should still exist and should be a vanilla log in page that you get with login errors.\n  ", id: "2184151", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "960 grid integration", description: "Use 960 grid for layout except for the story map.", id: "2261796", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Login takes me to my desired destination", description: "If I am logged out of Story Mapper and want to go directly to\n    http://www.trackerstorymaps.com/projects/19152/releases, I should be shown that URL after I log in.\n\n    Currently, the login behavior is to take me to my last viewed project or the project list regardless.\n\n    With this behavior we can implement the Story Mapper bookmarklet!\n  ", id: "2206163", labels: ""},
        {story_type: "release", current_state: "accepted", name: "Milestone: UI Improvements", description: "The goal of this milestone is to address UX and UI issues with Mapper so that we can share it internally\n    at C5 and even show it externally.\n  ", id: "1445845", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Add indices", description: "Add indices for those columns against queries are run:\n\n    configurations.pivotal_id\n    labels.configuration_id\n\n    Any others?\n  ", id: "2340560", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Async Google Analytics load", description: "http://code.google.com/apis/analytics/docs/tracking/asyncTracking.html\n\n    Don't let GA delay page loading and execution.\n  ", id: "2255907", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Header design integration", description: "https://wiki.carbonfive.com/display/C5/Visual+Design+Review+5\n\n    Header for logged in and not logged in. Branding of \"Story Mapper\" header to come.\n  ", id: "22560291715345", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Update README", description: "On github the README about the story mapper project is still the default rails README. It should be\n    changed to describe story mapper. We can probably use mostly the same text that we use for the front page.\n  ", id: "1974205", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Footer design integration", description: "https://wiki.carbonfive.com/display/C5/Visual+Design+Review+5\n\n    This implementation is really just the charcoal bar at the bottom. C5 logo to change, probably no nav, no Pivotal\n    logo.\n\n    Alon to write copy/list links so Suzanna can take another pass.\n  ", id: "22560331715353", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Projects list design integration", description: "https://wiki.carbonfive.com/display/C5/Visual+Design+Review+5\n\n    Logged in and not logged in.\n  ", id: "225604617967811818641", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Settings design integration", description: "https://wiki.carbonfive.com/display/C5/Visual+Design+Review+5", id: "225605117532051796865179690117969971823511240280", labels: "configure"},
        {story_type: "feature", current_state: "accepted", name: "secure Tracker API key", description: "As a (malicious) user, I should not be able to obtain the user's Tracker API key from the Story Mapper\n    app.\n\n    Currently, we store the key in the clear in a session cookie. We should encrypt the cookie, or store the API key on\n    server, or protect this data in some other way so that a malicious user can not obtain the key.\n  ", id: "2203806170273717133031834349", labels: "manage"},
        {story_type: "feature", current_state: "accepted", name: "Load labels inline with API v3", description: "", id: "23399371752819", labels: "configure"},
        {story_type: "feature", current_state: "accepted", name: "Bookmarklet to view story map from Tracker project", description: "From Tracker project I can use a bookmarklet to open the project in Story Mapper.\n\n    Link from the experimental page for now.\n  ", id: "2291689", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Replace exception_notifier with HopToad", description: "http://carbonfive.hoptoadapp.com", id: "2508454", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Set up NewRelic", description: "Use the Carbon Five account.", id: "2508707", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Profile and optimize, 1st pass", description: "Take a pass at identifying the slowest points in Story Mapper and see if there are any quick wins to\n    implement.\n\n    Consider using NewRelic in development mode to see if it turns anything up.\n  ", id: "25249831899497", labels: "usability"},
        {story_type: "bug", current_state: "accepted", name: "Safari story map does not fill window width", description: "", id: "2538664", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "1,2,4,8 scale missing 4pt icon", description: "I thought this was fixed a while ago?", id: "2484928", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Baseline align header elements", description: "Per David's suggestion:\n\n    \"I would like to see the main navigation items vertically centered in the space. Something about the way that\n    top edge doesn't line up left-to-right. I think you can get rid of the top margin and set the line-height to 36\n    pixels.\"", id: "25113461887107", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Dragging triggers mouseover events", description: "Dragging a story over other stories triggers the details icon to show and the story background color to\n    highlight. This distracts from the drag indicator. It should not.\n  ", id: "2511568", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Stories not dropping in correct position in Safari", description: "The problem occurs in safari, but not firefox, when dragging and dropping a story from one column to\n    another.\n\n    Drag a story from one column to another where the story will be dropped between two existing stories. The\n    drop-indicator shows up where the story _should_ drop, but when the story is dropped it is appended to the bottom of\n    the list and not where the drop-indicator says it should be.\n\n    ---\n\n    Technical notes: There is a function called sortByPosition in story_map.js that is triggered on drop - a good place\n    to start looking.\n  ", id: "20829521910775", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Story detail popup placement", description: "In tweaking the designs and consolidating CSS Alon broke the placement of the story detail popup. It\n    should show to the right of the detail icon unless there is no room for it in which case it should show to the left.\n  ", id: "2606555", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Tracker API 404 errors", description: "We are seeing several 404 errors from the Tracker API in production:\n\n    http://carbonfive.hoptoadapp.com/errors/1386636\n  ", id: "260711119653231965373", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Move story priority - non persistent", description: "As a planner I can move a story to a new milestone or position in its current milestone so that I change\n    when the work is done.\n\n    Only valid for stories that have not been started.\n\n    When dropped, is set to be next in priority list for the story before it in the same activity. If no story before it\n    in that milestone, then it is the first for that milestone after the stories in the previous activities.\n\n    Since pivotal has not implemented API support for this story yet the changes will not persist on page refresh.\n  ", id: "1382122115666916404131640415", labels: "planning"},
        {story_type: "feature", current_state: "accepted", name: "Alert/status design integration", description: "https://wiki.carbonfive.com/display/C5/Visual+Design+Review+5\n\n    Don't show for routine confirmation.\n    Show for errors or significant events.\n\n\n  ", id: "2256366169030518313931831407", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Move story priority - persistent", description: "As a planner when I change the priority of a story the new priority will persist on page refresh.\n  ", id: "2093056", labels: "planning"},
        {story_type: "feature", current_state: "accepted", name: "Extend placeholder drop target to bottom of column", description: "", id: "2893768", labels: "usability"},
        {story_type: "feature", current_state: "accepted", name: "Organize activities without changing priority", description: "As a project planner I can rearrange stories without changing their priority so that I can organize\n    activities without worrying about changing story priority.\n  ", id: "29341832222713", labels: "usability"},
        {story_type: "release", current_state: "accepted", name: "Bloggable", description: "", id: "1533583", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Failed with 400 Bad Request", description: "http://carbonfive.hoptoadapp.com/errors/1525774\n\n    It looks like the links to experimental features from http://www.trackerstorymaps.com/experimental_features do not\n    check if the project requires SSL when creating the link.\n\n    Because of the way that handling SSL is done right now, this means the call to Tracker is not over SSL so you get\n    this error.\n  ", id: "294029922352152236903", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Type error - can't convert nil to an Array", description: "Backtrace:\n    ----------\n    [PROJECT_ROOT]/app/models/configuration.rb:22:in `-'\n    [PROJECT_ROOT]/app/models/configuration.rb:22:in `update_labels'\n    [PROJECT_ROOT]/app/controllers/application_controller.rb:85:in `update_labels'\n  ", id: "29401662237511", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "SSL error saving story update does not show error in UI", description: "There is 400 error from the API but a NPE in StoriesController prevents the error from being returned as\n    JSON.\n  ", id: "2609926", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "Unable to drag anything in some projects", description: "This was reported by a user Adam Fitzgerald.\n\n    To reproduce:\n    1. Create a new project\n    2. Put some stories in\n    3. Create a new release, and leave it in the icebox\n\n    Go to story mapper, and notice that although you can (1) see all the stories (2) drag all the stories, they do not\n    drop.\n\n    Pulling the release into the back-log then enables dropping.\n\n    NOTE: There is no indication of which stories are in the ice box and which are in the backlog/current. Therefore it\n    seems odd to have a rule that you can't drag stories in the icebox (or in icebox/unscheduled releases).\n\n    Proposed changes:\n    1. allow dragging in and out of unscheduled releases\n\n    Not sure of the repercussions of this, so it may need a bit more thought. But basically it's right.\n  ", id: "29691972334409", labels: "planning,usability"},
        {story_type: "bug", current_state: "accepted", name: "Cannot get off Settings screen", description: "Reported by pal.berg@origo-mobikom.com.\n\n    Project set-up: all the stories and releases should be in the ice box.\n\n    To repro:\n    Sign in.\n    Go to settings, and see three labels\n    Hit \"See Story Map\".\n    It stays on the same page.\n\n    Desired behavior (I made this up): It should present a story map that says \"You have no stories in your backlog\"", id: "3044350", labels: "configure,setup,usability"},
        {story_type: "feature", current_state: "accepted", name: "Style public error pages", description: "404.html and 500.html should match the storymapper layout with no dynamic dependencies.", id: "3269897", labels: "usability"},
        {story_type: "feature", current_state: "accepted", name: "Friendly display of Tracker/ActiveResource errors", description: "There are a number of errors that happen when communicating with Tracker. Currently, all result in a\n    generic 500 error message page.\n\n    Let's have a page that says something along the lines of \"We encountered a problem communicating with Pivotal\n    Tracker. We have been notified and will look in to it if the problem persists. If you have any information that\n    might help us resolve this problem, please send it to storymapper@carbonfive.com\".\n\n    The ActiveResource errors we see are:\n\n    ActiveResource::TimeoutError: execution expired\n    ActiveResource::ResourceNotFound: Failed with 404 Not Found\n    ActiveResource::UnauthorizedAccess: Failed with 401 Unauthorized\n\n    Note that the 404 will actually happen if a user tries to access a project that they do not have permission to view.\n    Pivotal did this to hopefully avoid phishing.\n  ", id: "32562512491613", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Align map footer with bottom of screen", description: "", id: "29393462503757", labels: "usability"},
        {story_type: "bug", current_state: "accepted", name: "NPE rendering Tracker error page", description: "http://carbonfive.hoptoadapp.com/errors/1733695\n\n    NoMethodError: undefined method `code' for nil:NilClass\n\n  ", id: "331013525311992548555", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Update favicon", description: "Suzannah created a clean C5 favicon. Let's use it in Story Mapper until we have a icon specific to the\n    app.\n  ", id: "3331139", labels: "usability"},
        {story_type: "feature", current_state: "accepted", name: "Show release deadline", description: "For releases that have deadlines, show the deadline after the release name.", id: "25111512687839", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Highlight release in jeopardy", description: "In tracker, releases with deadlines are either blue or red, depending on whether the team's velocity\n    suggests they'll be able to finish all of the stories allocated to the release. During project planning, it would be\n    great if story mapper communicated this same information, so that I would know if I'm over-allocating the release.\n  ", id: "2836864267149127160472767003", labels: "visualize"},
        {story_type: "feature", current_state: "accepted", name: "Show release deadline status when viewing all releases", description: "See https://www.pivotaltracker.com/story/show/2836864.\n\n    All releases should be fetched with iteration data.\n  ", id: "3601245", labels: "visualize"},
        {story_type: "bug", current_state: "accepted", name: "400 Bad Request with \"\" iteration number", description: "http://carbonfive.hoptoadapp.com/errors/1834456", id: "36259682791401", labels: ""},
        {story_type: "bug", current_state: "accepted", name: "422 Tracker error dragging from future 'Other Activities' to current", description: "This happens in Story Mapper Sandbox project only when viewing all releases.\n\n    http://carbonfive.hoptoadapp.com/errors/1834728\n\n    The issue is that SM is trying to move the story after the previous release but there are done stories in the\n    current release.\n  ", id: "3616387", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Hosted bookmarklet", description: "Switch to using Lowell's hosted bookmarklet technique so we can update the bookmarklet without requiring\n    users to reinstall it.\n  ", id: "3411729269010127669812826961", labels: "labs"},
        {story_type: "bug", current_state: "accepted", name: "NPE in ICalsController", description: "http://carbonfive.hoptoadapp.com/errors/1834619", id: "3699063", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Hoptoad ActiveResource::BadRequest", description: "http://carbonfive.hoptoadapp.com/errors/1834455\n\n    This is the result of an AJAX call to check the overdue status of a release. I notice that it looks like it is\n    happening for the first iteration of a release so maybe this happens with new projects.\n  ", id: "3934750", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Hoptoad ActiveResource::UnauthorizedAccess for icals#show", description: "http://carbonfive.hoptoadapp.com/errors/1890407", id: "393466730945033094541", labels: "configure"},
        {story_type: "feature", current_state: "accepted", name: "Figure out why there is a lingering flash message in some Hoptoad errors.", description: "See http://carbonfive.hoptoadapp.com/errors/1884598", id: "42062643346213", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Introduce RVM and upgrade Rails 2.3", description: "", id: "6571729", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Upgrade to Rails 3.x", description: "", id: "12537397", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Upgrade gem dependencies (eliminate vendor gems)", description: "", id: "12537547", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Upgrade to Ruby 1.9.2", description: "", id: "12537405", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Continuous Integration on Teamcity", description: "Run all tests and deploy to acceptance on success.\n\n\n  ", id: "12537671", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Log in with API Key", description: "", id: "2947825", labels: "setup"},
        {story_type: "release", current_state: "accepted", name: "Freshen up the technology stack", description: "", id: "12537601", labels: ""},
        {story_type: "feature", current_state: "accepted", name: "Auto-hide \"Other Activities\" if it's empty", description: "", id: "13802461", labels: "usability"},
        {story_type: "bug", current_state: "accepted", name: "Icons missing for \"custom\" point values", description: "Marvin Sanders (msanders@logitech.com) reports that when stories are estimated at 13 and 20 points, their\n    is a \"missing icon\" showing.\n\n    Desired behavior:\n    Replicate whatever pivotal tracker does (?)\n\n    See email thread and screenshots May 20, 2011.\n  ", id: "13668717", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Upgrade to rails 3.2", description: "", id: "2226133747906074790635479061312753765", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Basic Mixpanel integration", description: "", id: "44819589132427331324274313242751132442891324279113242753132443191324276113242811", labels: ""},
        {story_type: "chore", current_state: "accepted", name: "Get JS tests running", description: "Optionally, convert to Jasmine etc. Get running locally and on CI.", id: "4615424513310945133109191331092313310927", labels: ""},
        {story_type: "feature", current_state: "finished", name: "Show Icebox", description: "Provide a way to view stories in the icebox and drag them into a milestone, to help product owners plan\n    milestones.\n\n    Acceptance criteria:\n    - The icebox is collapsed by default\n    - When collapsed, the icebox appears as a narrow vertical band on the left (see screenshot)\n    - Clicking the icebox expands it\n    - When expanded, the icebox lists stories in the same order as in Tracker\n    - The position of the icebox is fixed\n    - The height of the icebox is the same as the story map (or 100% of the viewport... whichever's smaller)\n    - The icebox scrolls vertically when there are enough stories to warrant it (it scrolls separately from the story\n    map on the rest of the page)\n\n    - Stories can be dragged from the icebox into an activity\n    - Stories can be dragged from an activity into the icebox\n\n\n    The design is a result of six-ups by Clark and Courtney:\n    - the icebox is a top-level entity (rather than embedded within a milestone or activities) for efficiency, since the\n    workflow of planning meetings typically includes quickly reviewing the icebox and making any adjustments necessary.\n    This also matches the semantics of the backlog?it doesn't belong to any particular milestone, it is outside\n    them.\n    - position is fixed for efficiency (icebox stays visible when scrolling to activities that are off-screen)\n    - collapse/expand keeps it clean and organized (at the expense of a little simplicity), since the icebox is relevant\n    to planning but not to viewing overall project status\n    - collapse/expand is triggered where the icebox will appear to keep it simple and clean (at the expense of\n    organization, since other show/hide behavior is triggered in the upper right)\n  ", id: "466801653970192117357131135181951348944113494155134894311348944313528261135443051354460913544333135241331355149314662345146885451466270314662701", labels: "milestone planning"},
        {story_type: "bug", current_state: "unstarted", name: "Dropping an unstarted story on a started story in the same activity removes the unstarted story from the story\n    map view/DOM\n  ", description: "", id: "47108381", labels: ""},
        {story_type: "bug", current_state: "unstarted", name: "Dragging into the \"Other activities\" column doesn't remove activity label (Internal Server Error)\n  ", description: "", id: "47107599", labels: ""},
        {story_type: "chore", current_state: "unstarted", name: "Improve Visual Design/Polish", description: "", id: "46870637", labels: "polish"},
        {story_type: "bug", current_state: "unstarted", name: "ActiveResource::SSLError in icals_controller", description: "Project: Story Mapper\n    Environment: Production\n    An error has just occurred. View full details at:\n    https://carbonfive.airbrake.io/groups/56093974\n    Error Message:\n    ActiveResource::SSLError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 read server hello A\n\n    Where:\n    icals#show\n    [GEM_ROOT]/gems/activeresource-3.2.12/lib/active_resource/connection.rb, line 119\n\n    URL:\n    https://www.trackerstorymaps.com/projects/633451/ical?token=7d039Rg1u622t3sSr5n0wmIXDY8%3D\n    Backtrace Summary:\n    [PROJECT_ROOT]/app/models/project.rb:10:in `find_with_stories_in_range&amp;#x27;\n    [PROJECT_ROOT]/app/models/project.rb:17:in `find_with_all_stories&amp;#x27;\n    [PROJECT_ROOT]/app/controllers/icals_controller.rb:28:in `show&amp;#x27;\n    [PROJECT_ROOT]/app/controllers/application_controller.rb:87:in `set_api_key&amp;#x27;\n  ", id: "46928549", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Easier access to unlabeled stories", description: "Provide an easier way to view unlabeled stories and drag them into activities for a milestone, to help\n    product owners plan milestones.\n\n    Currently they are all displayed in a column at the end titled \"Other activities\". It is unwieldy when\n    most of the stories are unlabeled. And it can also be hard to drag stories into activities if there are enough\n    labels to require horizontal scrolling.\n  ", id: "46680335", labels: "milestone planning,needs design"},
        {story_type: "feature", current_state: "unstarted", name: "Add new stories", description: "Provide a way to add new stories to a milestone, so that product owners don't have to switch from Story\n    Mapper to Tracker in the middle of planning.\n  ", id: "46680377", labels: "milestone planning,needs design"},
        {story_type: "feature", current_state: "unstarted", name: "Edit Stories", description: "Provide a way to edit stories (title and description), so that product owners don't have to switch from\n    Story Mapper to Tracker in the middle of planning when changes to priorities/plans require modifying stories.\n  ", id: "46680419", labels: "milestone planning,needs design"},
        {story_type: "feature", current_state: "unstarted", name: "Create milestones", description: "Provide a way to create a new milestone, so that product owners don't have to create the milestone in\n    Tracker before starting to plan in Story Mapper.\n  ", id: "46680439", labels: "milestone planning,needs design"},
        {story_type: "feature", current_state: "unstarted", name: "Hide/Collapse an activity", description: "Provide a way to hide/collapse and show/uncollapse an activity, so that a product owner isn't distracted\n    by activities that are empty or irrelevant to planning the current milestone.\n  ", id: "46680477", labels: "milestone planning,needs design"},
        {story_type: "feature", current_state: "unstarted", name: "Rearrange activities by drag-and-drop", description: "Drag-and-drop from the release planning page to rearrange activity columns, rather than having to go to\n    the configurations page through the settings link. To provide product managers a more convenient way to reorder\n    activities so they highlight what's relevant to planning the current milestone.\n  ", id: "46680547", labels: "milestone planning,needs design"},
        {story_type: "release", current_state: "unstarted", name: "Enhance Milestone Planning", description: "", id: "46680825", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Clean up headers", description: "- Move the settings (Show bugs, Prioritize On/Off, etc.) into a popover trigger by clicking a gear icon\n    - Condense the two separate headers ( Story Mapper and _Project Name_ ) into a single header\n    - Show user's name instead of \"API token f8386?\"\n\n    (I like the #DF800F orange we use in footer links... maybe switch the header to that color?)\n  ", id: "47082583", labels: "polish"},
        {story_type: "feature", current_state: "unstarted", name: "Fix vertical alignment of estimate icon", description: "Should work with all the different point scales. Updating the Tracker assets from v6 to v7 may be\n    enough... on Tracker the different images are all the same height (16px), but in our v6 copy they have different\n    heights.\n  ", id: "470820031747958317479595", labels: "polish"},
        {story_type: "feature", current_state: "unstarted", name: "Icebox Quick-Add", description: "In the icebox, if a story is already labelled with an activity, a \"quick add\" button appears on\n    hover that adds the story to the end of the \"current\" (?) milestone\n  ", id: "4687365339701985", labels: "needs elaboration"},
        {story_type: "bug", current_state: "unstarted", name: "Mixpanel property sometimes null: \"Days Since First Use\"", description: "", id: "46832069", labels: ""},
        {story_type: "chore", current_state: "unstarted", name: "Adopt master + topic branches git branch strategy", description: "We're kinda using the nvie git branching model now (there's a development branch). I think we can adopt\n    the github recommended strategy: master is always deployable, new features are developed in topic branches and\n    merged after they're accepted.\n  ", id: "22306145", labels: ""},
        {story_type: "chore", current_state: "unstarted", name: "Upgrade to ruby 1.9.3", description: "", id: "2226134147906214790629", labels: ""},
        {story_type: "chore", current_state: "unstarted", name: "Rename repo to \"story-mapper\"", description: "", id: "22305537", labels: ""},
        {story_type: "chore", current_state: "unstarted", name: "Update README for github. Move info from Confluence wiki to README or github wiki pages.", description: "", id: "46154457", labels: ""},
        {story_type: "chore", current_state: "unstarted", name: "Assess Tamara's requests", description: "See attachment", id: "4481990316224765", labels: ""},
        {story_type: "release", current_state: "unstarted", name: "Housekeeping", description: "", id: "22261207", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Improve onboarding experience.", description: "- As user, the huge list of uncategorized stories in the right column is confusing. For example, it moves\n    the second release box all the way to the bottom.\n    - The initial screen for picking important labels is yucky.\n  ", id: "44342495", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Add ActiveResource request params to Hoptoad errors", description: "", id: "420602833157553382499", labels: "usability"},
        {story_type: "feature", current_state: "unstarted", name: "Hoptoad ActionController::MethodNotAllowed for /session", description: "http://carbonfive.hoptoadapp.com/errors/1437381", id: "39346813346739", labels: "configure"},
        {story_type: "feature", current_state: "unstarted", name: "\"Remember me\"", description: "I'd like to specify my tracker credentials once and have the system remember who I am on subsequent\n    visits from the same machine/browser.\n  ", id: "1696317", labels: "setup"},
        {story_type: "feature", current_state: "unstarted", name: "Positive feedback when loading projects", description: "As a user,\n    I know that story maps is working properly when it's loading a project and taking a long time,\n    so that I don't refresh the page unnecessarily or give up.\n  ", id: "22304883", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "1-based release paging parameters", description: "When you start showing different ranges of releases, it seems like the status in the top left doesn't\n    reflect it. For example, \"Showing 6 - 10 of 16 releases\" is shown, but actually it is showing 5 releases\n    starting at 5 (from the URL ?start=5&amp;count=5).\n\n    I expect the numbers to match.\n  ", id: "185751613957011400759", labels: "planning"},
        {story_type: "feature", current_state: "unstarted", name: "Prioritize started / finished stories", description: "Apparently Tracker now allows dragging started and finished stories around, and it updates their status,\n    depending on where they get dropped. We should support that in storymapper.\n  ", id: "15127529", labels: "planning"},
        {story_type: "bug", current_state: "unstarted", name: "UI overlapping bug on IE", description: "Reported by David Greenfield (d.b.greenfield@gmail.com). See attachement.", id: "6570919764297", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Feature bookmarklet", description: "Feature the bookmarklet so that users know it is available, what it does and how to use it. The\n    implementation for this needs to be determined.\n  ", id: "3411725", labels: "usability"},
        {story_type: "feature", current_state: "unstarted", name: "Show iteration date range for release", description: "For each release, show the date range of the included iterations, both past or projected.\n\n    Is this available through the API?\n  ", id: "2511157", labels: "visualize"},
        {story_type: "feature", current_state: "unstarted", name: "Log in with OpenID", description: "From Peter Mounce &lt;pete@neverrunwithscissors.com&gt;", id: "11577899", labels: "configure"},
        {story_type: "release", current_state: "unstarted", name: "Deadline for testing", description: "", id: "44815093", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Personal Preferences for a project", description: "As a user, it should remember my preference for showing chores and bugs, so that when I return to a story\n    map it looks like it did when I left it (except for stories are updated).\n  ", id: "3077075", labels: "configure"},
        {story_type: "feature", current_state: "unstarted", name: "Printable story map", description: "As a user\n    I can print the story map\n    So that I can bring it to a wider audience\n  ", id: "37039723", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Stored configurations", description: "As a user\n    I can store specific view configurations as a named config\n    So that I can quickly show a specific view to a specific audience\n\n    * Columns (activities)\n    * Show bugs/chores\n  ", id: "37039813", labels: ""},
        {story_type: "feature", current_state: "unstarted", name: "Additional label sets", description: "As a user I can create a second set of labels for my project to visualize something other than\n    activities.\n  ", id: "20316233", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Icebox: Flyover descriptions", description: "", id: "50384289", labels: "icebox,milestone planning"},
        {story_type: "feature", current_state: "unscheduled", name: "Icebox: Add to top", description: "", id: "50384271", labels: "icebox,milestone planning"},
        {story_type: "feature", current_state: "unscheduled", name: "Icebox: Larger dropzone to add at bottom", description: "Developer note: This should be done with a \"placeholder\" that's resized with JS to fit the\n    remaining size of the icebox. I previously tried just to make the whole icebox div a droppable target, but the\n    jQuery UI behavior for nested/overlapping droppables makes that messy.\n  ", id: "50384249", labels: "icebox,milestone planning"},
        {story_type: "feature", current_state: "unscheduled", name: "Command-period or Escape should cancel dragging", description: "", id: "50380795", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Icebox shows iceboxed releases", description: "", id: "47010405", labels: ""},
        {story_type: "bug", current_state: "unscheduled", name: "Activity columns don't align", description: "If a story contains a long unbreakable word (such as ActionController::MethodNotAllowed) that forces its\n    width to be wider than it should, activity columns for that milestone will not align with activities in the other\n    milestones.\n\n    Developer note:\n    word-wrap: break-word (now overflow-wrap: break-word) fails to break the word. Perhaps because it's in a table?\n    (Pixel widths on the ol.story_list or p.name do cause the desired wrap when overflow-wrap is set.)\n  ", id: "46941957", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "In statusview, I can visually determine which labels have more stories/points.", description: "Show me the \"weight\" of one label visually, in addition to the numbers. I think estimated\n    points would be the weight.\n  ", id: "43104085", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "I can see an overview/stats page.", description: "I'd like to see a one screen view showing all labels and for each label: # stories, # points, # stories\n    to be accepted. V1 should show just the current milestone.\n  ", id: "43103997", labels: "statusview"},
        {story_type: "feature", current_state: "unscheduled", name: "I can specify that labels starting with a word such as \"Needs\" should be excluded from the overview.\n  ", description: "I often use labels like \"needs UX\" \"needs Eng\" but these are not relevant to the\n    story mapper columns.\n  ", id: "43103871", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "I can create a story in StoryMapper without going to PivotalTracker.", description: "I don't think you can add a story directly StoryMapper.", id: "43103807", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Filter Story Map", description: "As a user I can type in a query (maybe using a DSL) so that I can see a filtered view of the map that\n    focuses on a particular facet of the project.\n  ", id: "20317507", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Show release name on top", description: "As a user I can see the release name at the top of the release, rather than at the bottom.", id: "20317337", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Stickers to add to stories", description: "As I user I can annotate stories with additional information that would mark the story as special. This\n    could be saved on the story in Tracker.\n  ", id: "20317247", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Additional label data", description: "As a user I can add some additional information about labels so that the team knows what they are\n    about.\n  ", id: "20317165", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Warn users when reprioritizing instead of checkbox", description: "As a user I get a warning when I drag a story asking me if I want prioritization on or off. This would be\n    saved in my settings for the project, an d I could change it later.\n  ", id: "20317107", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Printing", description: "As a user I can print a giant poster of the story map.", id: "20316859", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Customize what labels are shown in-situ", description: "As a user I can click a menu to view additional unshown labels and then click them to show a new\n    column.\n  ", id: "20316807", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Edit labels in the tool", description: "As a user I can change the name of my label to correct typos made in Tracker.", id: "20316721", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "iPad support", description: "As a user I can use Tracker Story Maps using my iPad, including dragging and dropping items.\n  ", id: "20316509", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Better horizontal scrolling", description: "As a user I can scroll horizontally more easily without losing my place, maybe with an arrow I click on\n    to page over.\n  ", id: "20316469", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Collapse release", description: "As a user I can toggle a release visualization down to a smaller vertical size so that I can see more on\n    the screen.\n  ", id: "20316407", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Move story to release", description: "As a user I can select a story and move it to a release without dragging and dropping (maybe a checkbox\n    and a menu pulldown) so that I can move it far down the page without losing scrolling.\n  ", id: "20316373", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "In-situ management of labels", description: "As a user I can add and remove labels from my story map without leaving the page and see the results\n    interactively.\n  ", id: "20316213", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Show iterations as groups of stories (like sub-releases)", description: "As a user I can toggle a view that adds sub-panels for individual iterations so that I can plan a single\n    release (especially for projects with longer iterations)\n  ", id: "20316161", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Integrate Satisfaction", description: "Add feedback margin widget to logged in projects page, experimental page and help page.\n\n    Add link to Story Mapper in Satisfaction to the Help page.\n  ", id: "2291674", labels: ""},
        {story_type: "chore", current_state: "unscheduled", name: "Use jQuery metadata plugin instead of hidden spans", description: "", id: "1552167", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "A user should be able to see the stories in the icebox", description: "", id: "1601070", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "project drop down a-la-Tracker", description: "should we add a drop down in the upper left to match Trackers design?", id: "2138666", labels: ""},
        {story_type: "release", current_state: "unscheduled", name: "User Feedback", description: "", id: "2947822", labels: ""},
        {story_type: "feature", current_state: "unscheduled", name: "Option to display only release specific tags", description: "I like the idea for story mapper. It would be nice to have an option to only display tags with stories\n    within each release. On projects with a large number of tags it ends up being hard to see even on a really big\n    monitor. If there are tags that applied to the first few releases but those parts of the system are complete then\n    having those columns visible in later releases where there aren't any stories they just end up being white space.\n\n    ----\n    Adam Lowe\n    904-673-5656\n    http://www.adamlowe.me\n  ", id: "3241529", labels: ""}
    ]

    Story.delete_all

    stories.each do |story|
      s = Story.new summary: story[:name],
                    tags: [story[:story_type]],
                    project: Project.last,
                    current_state: story[:current_state]
      unless story[:labels].blank?
        s.tags = story[:labels].split(',')
      end
      s.theme = s.tags[1] || 'undefined'
      unless story[:description].blank?
        s.actions << (Action.new note: story[:description])
      end
      s.save!
    end
    nil
  end

  def epoch
    project.map_state_to_epoch(current_state)
  end
end
